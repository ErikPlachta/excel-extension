name: 'Build and Deploy'
description: 'Builds the Angular app and deploys to GitHub Pages'
inputs:
  token:
    description: 'GitHub token with write access'
    required: true
  base_href:
    description: 'Base href for Angular build'
    required: false
    default: '/'
runs:
  using: 'composite'
  steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-node@v4
      with:
        node-version: 20
    - run: npm ci
      shell: bash
    - run: npm run build -- --base-href "${{ inputs.base_href }}"
      shell: bash
    - uses: peaceiris/actions-gh-pages@v4
      with:
        github_token: ${{ inputs.token }}
        publish_dir: dist/excel-extension
        publish_branch: gh-pages
